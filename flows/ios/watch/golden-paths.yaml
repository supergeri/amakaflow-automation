# ⚠️ ASPIRATIONAL DOCUMENTATION ONLY ⚠️
# Maestro does NOT support watchOS simulators. This flow documents desired
# test coverage but CANNOT be executed. Actual watchOS tests are implemented
# as XCUITests in the amakaflow-ios-app repository.
# See: AmakaFlowWatch Watch AppUITests target

# watchOS Golden Paths Flow
# Tests critical user journeys on Apple Watch
#
# Run: maestro test flows/ios/watch/golden-paths.yaml

appId: com.myamaka.AmakaFlowCompanion.watchkitapp

onFlowError:
  - takeScreenshot: artifacts/screenshots/watchos-golden-error

---

# ============================================
# SETUP - Clean state for deterministic tests
# ============================================

- launchApp:
    clearState: true
    stopApp: true

- extendedWaitUntil:
    visible:
      id: "watch_main_screen"
    timeout: 15000
- assertNotVisible:
    id: "error_view"
    optional: true

- takeScreenshot: artifacts/screenshots/watchos-golden-01-launch

# ============================================
# GOLDEN PATH 1: Start Workout
# ============================================

# Tap start workout - MUST work
- tapOn:
    id: "start_workout_button"
    retryTapIfNoChange: true

- assertVisible:
    id: "workout_active_view"

- takeScreenshot: artifacts/screenshots/watchos-golden-02-workout-started

# Verify workout is active (timer visible) - MUST exist
- assertVisible:
    id: "workout_timer"

- takeScreenshot: artifacts/screenshots/watchos-golden-03-workout-active

# ============================================
# GOLDEN PATH 2: View Exercise
# ============================================

# View current exercise details (optional - may not have exercises loaded)
- tapOn:
    id: "current_exercise"
    optional: true
    retryTapIfNoChange: true

- takeScreenshot: artifacts/screenshots/watchos-golden-04-exercise-detail

# Go back to workout view
- swipe:
    direction: RIGHT

# ============================================
# GOLDEN PATH 3: Quick Log
# ============================================

# Open quick log - MUST work
- tapOn:
    id: "quick_log_button"
    retryTapIfNoChange: true

- assertVisible:
    id: "quick_log_view"

- takeScreenshot: artifacts/screenshots/watchos-golden-05-quick-log

# Log a set - MUST work
- tapOn:
    id: "log_set_button"
    retryTapIfNoChange: true

- takeScreenshot: artifacts/screenshots/watchos-golden-06-set-logged

# Close quick log
- swipe:
    direction: DOWN

# ============================================
# GOLDEN PATH 4: End Workout
# ============================================

# Tap end button - MUST work
- tapOn:
    id: "end_workout_button"
    retryTapIfNoChange: true

- takeScreenshot: artifacts/screenshots/watchos-golden-07-end-confirm

# Confirm end
- tapOn:
    text: "End"
    retryTapIfNoChange: true

- assertVisible:
    id: "workout_summary"

- takeScreenshot: artifacts/screenshots/watchos-golden-08-summary

# ============================================
# FINAL STATE
# ============================================

# Dismiss summary
- tapOn:
    id: "done_button"
    retryTapIfNoChange: true

- assertVisible:
    id: "watch_main_screen"

- takeScreenshot: artifacts/screenshots/watchos-golden-09-complete

# Final health check
- assertVisible:
    id: "watch_main_screen"
- assertVisible:
    id: "start_workout_button"
- assertNotVisible:
    id: "error_view"
    optional: true
